# CareTransit Portal Development Guidelines

## Domain Usage
- Always use the public domain `https://caretransitportal.vercel.app` for production testing and user access
- Preview domains (e.g., `caretransitportal-*-jaysons-projects-daf93732.vercel.app`) should only be used for development/testing specific features

## Deployment Process
1. **Verify Changes**
   - Check for uncommitted changes: `git status`
   - Ensure all tests pass locally
   - Review code changes

2. **Commit and Push**
   ```bash
   git add .
   git commit -m "descriptive message"
   git push origin main
   ```

3. **Deploy to Production**
   ```bash
   vercel deploy --prod --force
   ```

4. **Verify Deployment**
   - Check Vercel build logs for any errors
   - Visit https://caretransitportal.vercel.app to confirm changes
   - Run Playwright tests against production

## Testing Guidelines
- All Playwright tests should use the public domain
- Test files should be in the `tests/` directory
- Run tests in headless mode by default
- Always check Vercel build logs after deployment

## Error Handling
- Always fetch and analyze Vercel build logs when deployment fails
- Check for:
  - Prisma schema issues
  - Build command failures
  - Environment variable problems
  - Type errors

## Authentication Flow
- Public routes should be accessible without authentication
- Protected routes should redirect to `/auth/signin` with proper `callbackUrl`
- Test authentication flows using Playwright

## Cache Management
- Use `--force` flag with Vercel deployments to bypass cache
- Purge Vercel cache if needed through dashboard
- Verify changes are reflected immediately after deployment

## Code Organization
- Keep Playwright config in `playwright.config.ts`
- Store tests in `tests/` directory
- Use descriptive test names and comments
- Follow TypeScript best practices

## Best Practices
1. Always use public domain for production testing
2. Never hardcode preview domains in tests
3. Keep deployment process consistent
4. Monitor build logs for errors
5. Maintain clear commit messages
6. Run tests before deployment
7. Verify changes after deployment 